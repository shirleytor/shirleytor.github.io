<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Shirley Toribio">

<title>shirleytor.github.io - Pet Ownership in Sri Lanka</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">shirleytor.github.io</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-visualizations" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Data Visualizations</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-visualizations">    
        <li>
    <a class="dropdown-item" href="./data_viz.html">
 <span class="dropdown-text">World Fairs and CO2 Emissions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Netflix_Analysis.html">
 <span class="dropdown-text">Netflix</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./SQL_Proj.html">
 <span class="dropdown-text">Wideband Acoustic Immittance Data Visualization</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-analysis" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Data Analysis</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-analysis">    
        <li>
    <a class="dropdown-item" href="./Pets_SriLanka.html">
 <span class="dropdown-text">Pet Ownership in Sri Lanka</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-simulations" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Simulations</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-simulations">    
        <li>
    <a class="dropdown-item" href="./Beta_Simulation.html">
 <span class="dropdown-text">Using Normal Prediction Intervals on Symmetric Beta-distributed data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Bayesian_Optimization_Bernoulli.html">
 <span class="dropdown-text">Bayesian Optimization with Bernoulli Data</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-past-research" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Past Research</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-past-research">    
        <li>
    <a class="dropdown-item" href="./SIBDS.html">
 <span class="dropdown-text">Summer Institute in Biostatistics and Data Science Research</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./tda_research.html">
 <span class="dropdown-text">Kenneth Cooke Fellowship Research</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./Presentation.html"> 
<span class="menu-text">Presentation</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a></li>
  <li><a href="#data-analysis" id="toc-data-analysis" class="nav-link" data-scroll-target="#data-analysis">Data Analysis</a></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions">Conclusions</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Pet Ownership in Sri Lanka</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Shirley Toribio </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Pet ownership has been extremely common in human society for a significant portion of history. Within the last century, rates of pet ownership have increased as motives for pet ownership have shifted from practical to those concerning emotional well-being and entertainment (Konstantinova). Looking at ways to measure their overall perceived benefit can provide insight into the way different factors influence a pet’s perceived value. The cost of a pet is commonly understood as being one such way to measure a pet’s emotional, physical, and economic value, meaning that factors influencing a pet’s cost can provide insight into determinants of pet value and the nuances to their large importance in society. Two possible factors influencing pet value include the type of pet that is owned and the location where the pet originates from.</p>
<p>This analysis will measure the effect of these factors on pet value within the context of specific cities in Sri Lanka. Research into pet ownership trends in Anuradhapura, Sri Lanka suggests certain pets might be more valued than others based on their increased prevalence among pet owners (Rathish). Using two-way Analysis of Variance (ANOVA), the type of pet will be evaluated alongside whether a pet resides in either Gampaha, Kandy, or Colombo, which are cities in Sri Lanka, to determine if either influences the cost of a pet. A model based on factor effects will then be developed in accordance to the results of this analysis. In order to evaluate the effect of these factors on pet prices, section two of this paper will discuss the data used and its appropriateness for analysis, section three will discuss the usage of two-way ANOVA to evaluate these factors and the implications of its results, and section four will discuss important points to take away from this analysis and potential future research directions.</p>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"~/Stats Work/Data Science HW/shirleytor.github.io/animal_prices.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Price_in_Rupees=</span><span class="fu">as.numeric</span>(<span class="fu">str_remove_all</span>(Price, <span class="st">"[,Rs]"</span>)))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(data)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>unique<span class="ot">&lt;-</span><span class="fu">unique</span>(data[,<span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The data used for this analysis originates from Ikman.lk, a popular website for buying pets in Sri Lanka. It was collected through a script that compiles data from posts about pet sales (Jayawardena). The dataset itself has eleven variables, with one of them consisting of a url identifier for the post it pertains to. For the purpose of this analysis, only three variables are being examined: pet price, which is a numeric continuous variable, type of animal being sold, which is a categorical variable, and city where the animal is being sold, which is also a categorical variable. Pet price is measured in Rupees, Sri Lanka’s national currency, and is the response variable in this analysis. Type of pet being sold is an explanatory variable that consists of the following pet types: dog, cat, fish, and bird. City where the pet is being sold is also an explanatory variable that consists of the cities of Gampaha, Kandy, and Colombo. In order for all sample groups in this analysis to be balanced, they all have the same sample size of 10 different pet prices. The total sample size across all sample groups is 120 different pet prices. The sample groups were formed by using R to filter for pet prices corresponding to a specific pet type and Sri Lankan city-district. Two random districts corresponding to a specific city were chosen, and the first five prices related to a specific pet from each district were chosen to be part of the city sample. For instance, the first five bird prices from Kadawatha, Gampaha and the first five bird prices from Kiribathgoda, Gampaha were chosen to form the sample corresponding to bird prices in Gampaha. Since the data is ordered randomly and the districts were chosen randomly, there is no bias involved with the selection of the data. Each of these samples is thus random and can be used for inference. Due to the small sample size per sample group, it is unlikely they reflect the actual population of pet prices corresponding to a specific animal in a specific city. The sample size should still be large enough to determine if either factor affects pet price, however.</p>
<p>Data cleaning that samples from city-pet categories with 5 or more observations is performed with the code below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>more_than_100 <span class="ot">=</span> <span class="fu">c</span>() </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (each <span class="cf">in</span> unique){</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(dplyr<span class="sc">::</span><span class="fu">filter</span>(data,Location<span class="sc">==</span>each)) <span class="sc">&gt;</span> <span class="dv">1</span>){</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    more_than_100 <span class="ot">=</span> <span class="fu">c</span>(more_than_100,each)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>cities <span class="ot">=</span> <span class="fu">c</span>()</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (each <span class="cf">in</span> more_than_100){</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(dplyr<span class="sc">::</span><span class="fu">filter</span>(data,Location<span class="sc">==</span>each, Animal_Type<span class="sc">==</span><span class="st">"Dog"</span>)) <span class="sc">&gt;</span> <span class="dv">5</span> <span class="sc">&amp;</span> <span class="fu">nrow</span>(dplyr<span class="sc">::</span><span class="fu">filter</span>(data,Location<span class="sc">==</span>each, Animal_Type<span class="sc">==</span><span class="st">"Cat"</span>)) <span class="sc">&gt;</span> <span class="dv">5</span> <span class="sc">&amp;</span> <span class="fu">nrow</span>(dplyr<span class="sc">::</span><span class="fu">filter</span>(data,Location<span class="sc">==</span>each, Animal_Type<span class="sc">==</span><span class="st">"Fish"</span>)) <span class="sc">&gt;</span> <span class="dv">5</span> <span class="sc">&amp;</span> <span class="fu">nrow</span>(dplyr<span class="sc">::</span><span class="fu">filter</span>(data,Location<span class="sc">==</span>each, Animal_Type<span class="sc">==</span><span class="st">"Bird"</span>))<span class="sc">&gt;</span><span class="dv">5</span>){</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    cities <span class="ot">=</span> <span class="fu">c</span>(cities,each)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>Gampaha11 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kadawatha,  Gampaha"</span>, Animal_Type<span class="sc">==</span><span class="st">"Dog"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>Gampaha21 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kadawatha,  Gampaha"</span>, Animal_Type<span class="sc">==</span><span class="st">"Cat"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>Gampaha31 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kadawatha,  Gampaha"</span>, Animal_Type<span class="sc">==</span><span class="st">"Fish"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>Gampaha41 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kadawatha,  Gampaha"</span>, Animal_Type<span class="sc">==</span><span class="st">"Bird"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>Gampaha12 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location <span class="sc">==</span><span class="st">" Kiribathgoda,  Gampaha"</span>, Animal_Type<span class="sc">==</span><span class="st">"Dog"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>Gampaha22 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kiribathgoda,  Gampaha"</span>, Animal_Type<span class="sc">==</span><span class="st">"Cat"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>Gampaha32 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kiribathgoda,  Gampaha"</span>, Animal_Type<span class="sc">==</span><span class="st">"Fish"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>Gampaha42 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kiribathgoda,  Gampaha"</span>, Animal_Type<span class="sc">==</span><span class="st">"Bird"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>Kandy11 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kandy City,  Kandy"</span>, Animal_Type<span class="sc">==</span><span class="st">"Dog"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>Kandy21 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kandy City,  Kandy"</span>, Animal_Type<span class="sc">==</span><span class="st">"Cat"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>Kandy31 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kandy City,  Kandy"</span>, Animal_Type<span class="sc">==</span><span class="st">"Fish"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>Kandy41 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kandy City,  Kandy"</span>, Animal_Type<span class="sc">==</span><span class="st">"Bird"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>Kandy12 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Katugastota,  Kandy"</span>, Animal_Type<span class="sc">==</span><span class="st">"Dog"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>Kandy22 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Katugastota,  Kandy"</span>, Animal_Type<span class="sc">==</span><span class="st">"Cat"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>Kandy32 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Katugastota,  Kandy"</span>, Animal_Type<span class="sc">==</span><span class="st">"Fish"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>Kandy42 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Katugastota,  Kandy"</span>, Animal_Type<span class="sc">==</span><span class="st">"Bird"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>Colombo11 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kotte,  Colombo"</span>, Animal_Type<span class="sc">==</span><span class="st">"Dog"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>Colombo21 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kotte,  Colombo"</span>, Animal_Type<span class="sc">==</span><span class="st">"Cat"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>Colombo31 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kotte,  Colombo"</span>, Animal_Type<span class="sc">==</span><span class="st">"Fish"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>Colombo41 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kotte,  Colombo"</span>, Animal_Type<span class="sc">==</span><span class="st">"Bird"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>Colombo12 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kolonnawa,  Colombo"</span>, Animal_Type<span class="sc">==</span><span class="st">"Dog"</span> )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>Colombo22 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kolonnawa,  Colombo"</span>, Animal_Type<span class="sc">==</span><span class="st">"Cat"</span>  )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>Colombo32 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kolonnawa,  Colombo"</span>, Animal_Type<span class="sc">==</span><span class="st">"Fish"</span>  )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>Colombo42 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data, Location<span class="sc">==</span><span class="st">" Kolonnawa,  Colombo"</span>, Animal_Type<span class="sc">==</span><span class="st">"Bird"</span>  )[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>combination <span class="ot">&lt;-</span><span class="fu">rbind</span>(Gampaha11,Gampaha12,Gampaha21,Gampaha22,Gampaha31,Gampaha32,Gampaha41,Gampaha42,Kandy11,Kandy12,Kandy21,Kandy22,Kandy31,Kandy32,Kandy41,Kandy42,Colombo11,Colombo12,Colombo21,Colombo22,Colombo31,Colombo32,Colombo41,Colombo42) <span class="sc">%&gt;%</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Location =</span> <span class="fu">case_when</span>(</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    Location <span class="sc">==</span> <span class="st">" Kotte,  Colombo"</span> <span class="sc">~</span> <span class="st">"Colombo"</span>,</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    Location <span class="sc">==</span> <span class="st">" Kolonnawa,  Colombo"</span> <span class="sc">~</span> <span class="st">"Colombo"</span>,</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    Location <span class="sc">==</span> <span class="st">" Katugastota,  Kandy"</span> <span class="sc">~</span> <span class="st">"Kandy"</span>,</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>    Location <span class="sc">==</span> <span class="st">" Kandy City,  Kandy"</span> <span class="sc">~</span> <span class="st">"Kandy"</span>,</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    Location <span class="sc">==</span> <span class="st">" Kiribathgoda,  Gampaha"</span> <span class="sc">~</span> <span class="st">"Gampaha"</span>,</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>    Location <span class="sc">==</span> <span class="st">" Kadawatha,  Gampaha"</span> <span class="sc">~</span> <span class="st">"Gampaha"</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>inferior_fit <span class="ot">&lt;-</span> <span class="fu">aov</span>(Price_in_Rupees<span class="sc">~</span>Animal_Type <span class="sc">+</span> Location, <span class="at">data=</span>combination)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(inferior_fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: Price_in_Rupees
             Df     Sum Sq    Mean Sq F value    Pr(&gt;F)    
Animal_Type   3 4.7523e+10 1.5841e+10  7.4750 0.0001368 ***
Location      2 6.2369e+09 3.1184e+09  1.4715 0.2341891    
Residuals   107 2.2676e+11 2.1192e+09                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">TukeyHSD</span>(inferior_fit,<span class="at">conf.level=</span>.<span class="dv">975</span>,<span class="at">which=</span><span class="st">"Animal_Type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Tukey multiple comparisons of means
    97.5% family-wise confidence level

Fit: aov(formula = Price_in_Rupees ~ Animal_Type + Location, data = combination)

$Animal_Type
               diff        lwr        upr     p adj
Cat-Bird   16044.20 -20596.886  52685.291 0.5918521
Dog-Bird   32166.67  -1969.075  66302.409 0.0390312
Fish-Bird -22037.10 -56172.842  12098.642 0.2542078
Dog-Cat    16122.46 -20518.625  52763.552 0.5879680
Fish-Cat  -38081.30 -74722.391  -1440.214 0.0182015
Fish-Dog  -54203.77 -88339.509 -20068.025 0.0000798</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>fit<span class="ot">&lt;-</span> <span class="fu">aov</span>(<span class="fu">sqrt</span>(Price_in_Rupees)<span class="sc">~</span>Animal_Type <span class="sc">+</span> Location, <span class="at">data=</span>combination)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: sqrt(Price_in_Rupees)
             Df Sum Sq Mean Sq F value    Pr(&gt;F)    
Animal_Type   3 605119  201706 29.8031 4.379e-14 ***
Location      2  13783    6891  1.0182    0.3647    
Residuals   107 724173    6768                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">TukeyHSD</span>(fit,<span class="at">conf.level=</span>.<span class="dv">975</span>,<span class="at">which=</span><span class="st">"Animal_Type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Tukey multiple comparisons of means
    97.5% family-wise confidence level

Fit: aov(formula = sqrt(Price_in_Rupees) ~ Animal_Type + Location, data = combination)

$Animal_Type
                diff        lwr        upr     p adj
Cat-Bird    97.89168   32.41165  163.37170 0.0002247
Dog-Bird   128.89603   67.89322  189.89884 0.0000001
Fish-Bird  -50.00844 -111.01125   10.99436 0.0924279
Dog-Cat     31.00435  -34.47568   96.48438 0.5272384
Fish-Cat  -147.90012 -213.38015  -82.42009 0.0000000
Fish-Dog  -178.90447 -239.90728 -117.90166 0.0000000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>City <span class="ot">&lt;-</span> combination<span class="sc">$</span>Location</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>Animal_Type <span class="ot">&lt;-</span> combination<span class="sc">$</span>Animal_Type</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>Cost_in_Rupees <span class="ot">&lt;-</span> combination<span class="sc">$</span>Price_in_Rupees</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="data-analysis">Data Analysis</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: Price_in_Rupees
             Df     Sum Sq    Mean Sq F value    Pr(&gt;F)    
Animal_Type   3 4.7523e+10 1.5841e+10  7.4750 0.0001368 ***
Location      2 6.2369e+09 3.1184e+09  1.4715 0.2341891    
Residuals   107 2.2676e+11 2.1192e+09                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  Tukey multiple comparisons of means
    97.5% family-wise confidence level

Fit: aov(formula = Price_in_Rupees ~ Animal_Type + Location, data = combination)

$Animal_Type
               diff        lwr        upr     p adj
Cat-Bird   16044.20 -20596.886  52685.291 0.5918521
Dog-Bird   32166.67  -1969.075  66302.409 0.0390312
Fish-Bird -22037.10 -56172.842  12098.642 0.2542078
Dog-Cat    16122.46 -20518.625  52763.552 0.5879680
Fish-Cat  -38081.30 -74722.391  -1440.214 0.0182015
Fish-Dog  -54203.77 -88339.509 -20068.025 0.0000798</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: sqrt(Price_in_Rupees)
             Df Sum Sq Mean Sq F value    Pr(&gt;F)    
Animal_Type   3 605119  201706 29.8031 4.379e-14 ***
Location      2  13783    6891  1.0182    0.3647    
Residuals   107 724173    6768                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  Tukey multiple comparisons of means
    97.5% family-wise confidence level

Fit: aov(formula = sqrt(Price_in_Rupees) ~ Animal_Type + Location, data = combination)

$Animal_Type
                diff        lwr        upr     p adj
Cat-Bird    97.89168   32.41165  163.37170 0.0002247
Dog-Bird   128.89603   67.89322  189.89884 0.0000001
Fish-Bird  -50.00844 -111.01125   10.99436 0.0924279
Dog-Cat     31.00435  -34.47568   96.48438 0.5272384
Fish-Cat  -147.90012 -213.38015  -82.42009 0.0000000
Fish-Dog  -178.90447 -239.90728 -117.90166 0.0000000</code></pre>
</div>
</div>
<p>In order to perform the F test, homoscedasticity across all sample groups under a specific model is an assumption that needs to be met. In terms of this analysis, that means the variance in pet prices within each subgroup needs to be similar.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>inferior_fit <span class="ot">&lt;-</span> <span class="fu">aov</span>(Price_in_Rupees<span class="sc">~</span>Animal_Type <span class="sc">+</span> Location, <span class="at">data=</span>combination)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(inferior_fit,<span class="at">which =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Pets_SriLanka_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Each group of points in this figure represents a specific subgroup of pet prices corresponding to a specific type of pet in a specific city. When the spread of points within each subgroup is compared to the spread of them in other subgroups, it is evident that different subgroups have different spreads, meaning they have different variances in pet price.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(fit,<span class="at">which =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Pets_SriLanka_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As this figure shows, the variances within each group resemble each other significantly more when prices are interpreted in terms of their square root. Since homoscedasticity is necessary for the F-test, the rest of this analysis will interpret pet prices in terms of their square roots instead of the prices themselves. By making sure that homoscedasticity is met, the potential effects of pet type and location on pet prices can then be seen.</p>
<p>The purpose of the ANOVA analysis was to see if either pet type or location individually had an effect on the prices of pets. For this reason, two F-tests were conducted for each possible variable. Each variable was given an alpha value of .025 in order to maintain a family-wise confidence level of 95%. The first F-test consists of mean square pet type divided by mean square error, which is the variance of the mean square-root prices in terms of pet type only for all observations divided by the variance of all residuals given the entire model is used to find the fitted value. This is a measure of the amount of variance in the full model explained by pet type being a factor divided by the variance of the residuals given the full model. If pet type is not a significant factor, the numerator of this value should be approximately equal to one variance, meaning the resulting F-score should be approximately one. The null hypothesis for this test is that pet type is not a significant factor, meaning there would be close to no difference in the mean square root prices per pet type. The p-value for the F-test corresponding to pet-type, however, was lower than .025, meaning this null hypothesis is most likely not true and pet type is a significant factor in this model. A second F-test was also performed to test whether a sale occurring in Gampaha, Kandy, or Colombo influenced square root pet prices; since the test resulted in a p-value greater than .025, the null hypothesis that residing in one of these three cities does not have a significant effect on square root pet prices cannot be dismissed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">TukeyHSD</span>(fit,<span class="at">conf.level=</span>.<span class="dv">975</span>,<span class="at">which=</span><span class="st">"Animal_Type"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Pets_SriLanka_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>From top to bottom, this figure presents confidence intervals for the following pairwise comparisons: cat-bird, dog-bird, fish-bird, dog-cat, fish-cat, and fish-dog. The family wise confidence level is 97.5% because comparisons concerning pet type all have an alpha value of .025. The confidence intervals for the cat-bird, dog-bird, fish-cat, and fish-dog comparisons do not cover zero, meaning this analysis suggests 97.5% confidence of these pet groups possessing different prices from one another throughout Colombo, Kandy, and Gampaha. Since the dog-cat and fish-bird comparisons cover zero, there does not appear to be a significant difference among both pairs of pet price averages throughout Colombo, Kandy, and Gampaha. Both of these sets of comparisons suggest there is an overall difference in price between mammalian pets and non-mammalian pets among the residents of Colombo, Kandy, and Gampaha, which corresponds to people in all three cities assigning differents levels of value to mammalian and non-mammalian pets. It is also possible that dogs and cats, as the most popular pets worldwide, have significantly higher prices in Colombo, Kandy, and Gampaha than all other pets, including other mammalian ones. In order to determine which hypothesis is accurate, however, more analysis would need to be conducted. Based on this analysis, an appropriate model for predicting the prices of pets in Gampaha, Kandy, and Colombo should consist of the average pet price per species of pet.</p>
</section>
<section id="conclusions" class="level2">
<h2 class="anchored" data-anchor-id="conclusions">Conclusions</h2>
<p>The species of a pet appears to have a significant influence on its pricing in the cities of Gampaha, Kandy, and Colombo. Possible improvements to this analysis involve extending it to more cities in Sri Lanka through the inclusion of other cities or through redoing this analysis under a mixed-effects model. This would be in order to definitively exclude location as an influence on the prices of pets in Sri Lanka. Differences in pricing also seem to be most pronounced between the mammalian and non-mammalian species of the sample analyzed. In order to determine whether this difference is based on the status of a pet as a mammalian or non-mammalian animal, one-way ANOVA could be conducted comparing these two groups of pets.</p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<p>Jayawardena, Lasal. “Sri Lanka Animal Prices Dataset.” Kaggle, 31 Oct.&nbsp;2021, www.kaggle.com/datasets/lasaljaywardena/sri-lanka-animal-prices-dataset.</p>
<p>Konstantinova, Anastasia, et al.&nbsp;“Perceived Benefits and Costs of Owning a Pet in a Megapolis: An Ecosystem Services Perspective.” MDPI, 24 Sept.&nbsp;2021, www.mdpi.com/2071-1050/13/19/10596.</p>
<p>Rathish, Devarajan, et al.&nbsp;“Household Preferences for Pet Keeping: Findings from a Rural District of Sri Lanka.” PLOS ONE, 22 Nov.&nbsp;2022, journals.plos.org/plosone/article?id=10.1371%2Fjournal.pone.0277108.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>